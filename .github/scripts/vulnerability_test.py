import shlex
import subprocess
import time

port = "1883"
addr = "127.0.0.1"
data_path = ".github/scripts/vul_data.raw"

def vul_test():
    vul_cmd = "nc " + addr +" "+ port + " < " + data_path
    vul_test_cmd = shlex.split(vul_cmd)
    process = subprocess.Popen(vul_test_cmd,
                               stdout=subprocess.PIPE,
                               universal_newlines=True)
    time.sleep(1)
    process.terminate()